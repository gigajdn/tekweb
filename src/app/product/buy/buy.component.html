<app-top></app-top>
<div class="product-list-container">
  <h2>Product List</h2>
  <div class="product-list">
    <div class="product" *ngFor="let product of products">
      <div class="product-card">
        <div class="product-image">
          <img
            [src]="'http://localhost:3000' + product.path"
            alt="Product Image"
          />
        </div>
        <div class="product-details">
          <h3>{{ product.name }}</h3>
          <p>Stok Produk: {{ product.quantity | number }}</p>
          <p>Harga: {{ product.price | rupiah }}</p>
          <div *ngIf="id !== product._id" class="button-group">
            <button class="edit-button" (click)="editProduct(product)">
              Buy
            </button>
          </div>
          <div *ngIf="id === product._id" class="edit-fields">
            <label for="quantity">Stok Produk:</label>
            <input
              type="text"
              onkeypress="return event.charCode >= 48 && event.charCode <= 57"
              id="quantity"
              [(ngModel)]="product.quantity"
              disabled="true"
            />
            <label for="price">Harga(Rp):</label>
            <input
              type="text"
              onkeypress="return event.charCode >= 48 && event.charCode <= 57"
              id="price"
              [(ngModel)]="product.price"
              disabled="true"
            />
            <label for="amount">Amount:</label>
            <input
              type="text"
              onkeypress="return event.charCode >= 48 && event.charCode <= 57"
              id="amount"
              [(ngModel)]="product.amount"
            />
            <div class="button-group">
              <button class="buy-button" (click)="buyProduct(product)">
                Buy
              </button>
              <button class="cancel-button" (click)="cancelBuy()">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="products.length === 0" class="no-products">
      No products found.
    </div>
  </div>
</div>
